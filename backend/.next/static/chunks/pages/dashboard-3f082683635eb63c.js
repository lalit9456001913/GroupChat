(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1015:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(7048)}])},8639:function(e,n,t){"use strict";t.d(n,{z:function(){return s}});var r=t(7294);let s=e=>(0,r.useCallback)(async n=>{try{return{values:await e.validate(n,{abortEarly:!1}),errors:{}}}catch(e){return{values:{},errors:e.inner.reduce((e,n)=>{var t;return{...e,[n.path]:{type:null!==(t=n.type)&&void 0!==t?t:"validation",message:n.message}}},{})}}},[e])},6456:function(e,n,t){"use strict";t.r(n);var r=t(5893),s=t(7294),i=t(7536),o=t(6139),a=t(3253),l=t.n(a),u=t(6310),d=t(8639);n.default=e=>{let{onCreateGroup:n,options:t,showGroup:a,onCloseGroup:c}=e,[p,h]=(0,s.useState)(!1),{handleSubmit:m,control:x,register:g,reset:f,watch:b,formState:{errors:j}}=(0,i.cI)({resolver:(0,d.z)(u.Ry().shape({groupName:u.Z_().required("Group Name is required"),groupAdmin:u.Ry().required("Group Admin is required"),members:u.IX().test("is-same-as-group-Admin","Group Admin cannot be included in the members list",e=>e.length&&!e.some(e=>e.value==b("groupAdmin").value))}))}),v=async e=>{await n(e),f({groupName:"",groupAdmin:"",members:""}),c()},y={width:"100%",padding:"10px",marginTop:"4px",marginBottom:"12px",boxSizing:"border-box",border:"1px solid #ccc",borderRadius:"4px",fontSize:"16px"};return(0,r.jsxs)(l(),{isOpen:a,onRequestClose:c,contentLabel:"Create Group Form",style:{content:{width:"50%",height:"50%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},ariaHideApp:!1,children:[(0,r.jsx)("h2",{children:"Create Group Form"}),(0,r.jsxs)("form",{onSubmit:m(v),children:[(0,r.jsxs)("label",{children:["Group Name:",(0,r.jsx)("input",{type:"text",name:"groupName",...g("groupName"),style:y}),j.groupName&&(0,r.jsx)("p",{style:{color:"red"},children:j.groupName.message})]}),(0,r.jsxs)("label",{children:["Select Group Admin:",(0,r.jsx)(i.Qr,{name:"groupAdmin",control:x,render:e=>{let{field:n}=e;return(0,r.jsx)(o.ZP,{...n,options:t,style:y})}}),j.groupAdmin&&(0,r.jsx)("p",{style:{color:"red"},children:j.groupAdmin.message})]}),(0,r.jsxs)("label",{children:["Members:",(0,r.jsx)(i.Qr,{name:"members",control:x,render:e=>{let{field:n}=e;return(0,r.jsx)(o.ZP,{...n,options:t,isMulti:!0,style:y})}}),j.members&&(0,r.jsx)("p",{style:{color:"red"},children:j.members.message})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px",width:"100%"},children:[(0,r.jsx)("button",{type:"button",onClick:c,style:{backgroundColor:"#DC3545",color:"white",padding:"12px 20px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",marginRight:"10px"},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",style:{backgroundColor:p?"#0D6EFD":"#007BFF",color:"white",padding:"12px 20px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},onMouseOver:()=>h(!0),onMouseOut:()=>h(!1),children:"Create Group"})]})]})]})}},8913:function(e,n,t){"use strict";t.r(n);var r=t(5893),s=t(7294),i=t(7536),o=t(6310),a=t(8639),l=t(3253),u=t.n(l);n.default=e=>{let{onCreateUser:n,onCloseUser:t,showUser:l}=e,[d,c]=(0,s.useState)(!1),{handleSubmit:p,control:h,register:m,reset:x,watch:g,formState:{errors:f}}=(0,i.cI)({resolver:(0,a.z)(o.Ry().shape({username:o.Z_().required("Username is required"),email:o.Z_().email().required("Email is required"),password:o.Z_().required("Password is required")}))}),b=async e=>{await n(e),x({username:"",password:""}),t()},j={width:"100%",padding:"10px",marginTop:"4px",marginBottom:"12px",boxSizing:"border-box",border:"1px solid #ccc",borderRadius:"4px",fontSize:"16px"};return(0,r.jsxs)(u(),{isOpen:l,onRequestClose:t,contentLabel:"Create User Form",style:{content:{width:"50%",height:"50%",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},ariaHideApp:!1,children:[(0,r.jsx)("h2",{children:"Create User Form"}),(0,r.jsxs)("form",{onSubmit:p(b),children:[(0,r.jsxs)("label",{children:["Username:",(0,r.jsx)("input",{type:"text",...m("username"),style:j}),f.username&&(0,r.jsx)("p",{style:{color:"red"},children:f.username.message})]}),(0,r.jsxs)("label",{children:["Email:",(0,r.jsx)("input",{type:"text",...m("email"),style:j}),f.email&&(0,r.jsx)("p",{style:{color:"red"},children:f.email.message})]}),(0,r.jsxs)("label",{children:["Password:",(0,r.jsx)("input",{type:"password",...m("password"),style:j}),f.password&&(0,r.jsx)("p",{style:{color:"red"},children:f.password.message})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px",width:"100%"},children:[(0,r.jsx)("button",{type:"button",onClick:t,style:{backgroundColor:"#DC3545",color:"white",padding:"12px 20px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",marginRight:"10px"},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",style:{backgroundColor:d?"#0D6EFD":"#007BFF",color:"white",padding:"12px 20px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"background-color 0.3s ease"},onMouseOver:()=>c(!0),onMouseOut:()=>c(!1),children:"Create User"})]})]})]})}},1020:function(e,n,t){"use strict";t.r(n);var r=t(2729),s=t(5893);t(7294);var i=t(964);t(8798);var o=t(1163);function a(){let e=(0,r._)(["\n  max-width: 600px;\n  margin: 20px auto;\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n"]);return a=function(){return e},e}function l(){let e=(0,r._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  border-bottom: 1px solid #eee;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  h3 {\n    margin: 0;\n  }\n\n  button {\n    background-color: #4caf50;\n    color: #fff;\n    padding: 8px;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n"]);return l=function(){return e},e}let u=i.ZP.div(a()),d=i.ZP.div(l());n.default=e=>{let{auth:n,groups:t,onDeleteGroup:r}=e,i=(0,o.useRouter)(),a=async(e,n)=>{r(e,n)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u,{style:{display:"inline-block",verticalAlign:"top"},children:[(0,s.jsxs)("h2",{children:[null==n?void 0:n.username," Messaging Groups"]}),(null==t?void 0:t.length)&&(null==t?void 0:t.map(e=>{var t;if(null==e?void 0:null===(t=e.members)||void 0===t?void 0:t.some(e=>e._id==n.id))return(0,s.jsxs)(d,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("h3",{children:e.name})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>{i.push("/groups/".concat(null==e?void 0:e._id))},children:"view"}),(0,s.jsx)("button",{onClick:()=>{i.push("/groups/".concat(null==e?void 0:e._id,"/edit"))},children:"Edit"}),(null==n?void 0:n.isAdmin)&&(0,s.jsx)("button",{onClick:()=>{a(null==e?void 0:e._id,null==e?void 0:e.admin)},children:"Delete"})]})]},e._id)}))]}),(0,s.jsxs)(u,{style:{display:"inline-block",verticalAlign:"top"},children:[(0,s.jsxs)("h2",{children:[null==n?void 0:n.username," Groups (Admin)"]}),(null==t?void 0:t.length)&&(null==t?void 0:t.map(e=>{if(e.admin==n.id)return(0,s.jsxs)(d,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("h3",{children:e.name})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>{i.push("/groups/".concat(null==e?void 0:e._id))},children:"view"}),(0,s.jsx)("button",{onClick:()=>{i.push("/groups/".concat(null==e?void 0:e._id,"/edit"))},children:"Edit"}),(0,s.jsx)("button",{onClick:()=>{a(null==e?void 0:e._id,null==e?void 0:e.admin)},children:"Delete"})]})]},e._id)}))]}),(0,s.jsxs)(u,{style:{display:"inline-block",verticalAlign:"top"},children:[(0,s.jsx)("h2",{children:"All Group List"}),(null==t?void 0:t.length)&&(null==t?void 0:t.map(e=>(0,s.jsxs)(d,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("h3",{children:e.name})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>{i.push("/groups/".concat(null==e?void 0:e._id))},children:"view"}),(0,s.jsx)("button",{onClick:()=>{i.push("/groups/".concat(null==e?void 0:e._id,"/edit"))},children:"Edit"}),n.isAdmin&&(0,s.jsx)("button",{onClick:()=>{a(null==e?void 0:e._id,null==e?void 0:e.admin)},children:"Delete"})]})]},e._id)))]})]})}},8628:function(e,n,t){"use strict";t.r(n);var r=t(5893);t(7294);let s={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",backgroundColor:"#4CAF50",color:"#fff",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},i={margin:"0 10px",cursor:"pointer",textDecoration:"none",color:"#fff"},o={margin:"0 10px",cursor:"pointer",textDecoration:"none",color:"#fff",backgroundColor:"#007bff"};n.default=e=>{let{onClickLogin:n,onClickLogout:t,onClickCreateUser:a,onClickCreateGroup:l,onClickViewAllGroups:u,onClickViewAllUsers:d,auth:c}=e;return(0,r.jsxs)("div",{style:s,children:[(0,r.jsxs)("div",{children:[c&&(null==c?void 0:c.isAdmin)&&(0,r.jsx)("span",{style:i,onClick:a,children:"Create User"}),(0,r.jsx)("span",{style:i,onClick:l,children:"Create Group"})]}),(0,r.jsxs)("div",{children:[c&&(0,r.jsx)("span",{style:i,children:null==c?void 0:c.username}),c&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{style:o,onClick:t,children:"Logout"})}),!c&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{style:i,onClick:n,children:"Login"})})]})]})}},6798:function(e,n,t){"use strict";t.r(n);var r=t(2729),s=t(5893);t(7294);var i=t(964),o=t(1163);function a(){let e=(0,r._)(["\n  max-width: 600px;\n  margin: 20px auto;\n  padding: 20px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n"]);return a=function(){return e},e}function l(){let e=(0,r._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  border-bottom: 1px solid #eee;\n\n  &:last-child {\n    border-bottom: none;\n  }\n\n  h3 {\n    margin: 0;\n  }\n\n  button {\n    background-color: #4caf50;\n    color: #fff;\n    padding: 8px;\n    margin-left: 10px;\n    cursor: pointer;\n  }\n"]);return l=function(){return e},e}let u=i.ZP.div(a()),d=i.ZP.div(l());n.default=e=>{let{users:n,auth:t}=e,r=(0,o.useRouter)(),i=e=>{};return(0,s.jsxs)(u,{children:[(0,s.jsx)("h2",{children:"User List"}),(null==n?void 0:n.length)&&(null==n?void 0:n.map(e=>(0,s.jsxs)(d,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:e.name}),(0,s.jsxs)("p",{children:["Email: ",e.email]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>{r.push("/users/".concat(null==e?void 0:e._id))},children:"View"}),(0,s.jsx)("button",{onClick:()=>{r.push("/users/".concat(null==e?void 0:e._id,"/edit"))},children:"Edit"}),(0,s.jsx)("button",{onClick:()=>{i(null==e?void 0:e._id)},children:"Delete"})]})]},e._id)))]})}},7048:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return m}});var r=t(5893),s=t(7294),i=t(6456),o=t(8628),a=t(8798),l=t(5642),u=t(1163),d=t(4142),c=t(8913),p=t(1020),h=t(6798),m=!0;n.default=e=>{let{auth:n,groupsData:t,usersData:m}=e,[x,g]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[j,v]=(0,s.useState)(t),[y,C]=(0,s.useState)(m),w=(0,u.useRouter)(),[k,_]=(0,s.useState)([]);(0,s.useEffect)(()=>{F()},[f]);let A=async e=>{try{let n={name:null==e?void 0:e.groupName,userId:e.groupAdmin.value,members:e.members.map(e=>e.value)};if(n.members.push(e.groupAdmin.value),(await (0,a.sS)(n)).status){let e=await (0,a.Fb)();e.status&&v(e.data),g(!1)}else console.error(n.error)}catch(e){console.error(e)}},S=async e=>{try{(await (0,d.r4)(e)).status&&b(!1)}catch(e){console.log(e)}},Z=async(e,n)=>{if((await (0,a.yq)(e,n)).status){let e=await (0,a.Fb)();e.status&&v(e.data)}},G=async e=>{if((await (0,d.h8)(e)).status){let e=await (0,d.AW)();e.status&&C(e.data)}},F=async()=>{let e=await (0,d.AW)();e.status&&(C(e.data),_([...null==e?void 0:e.data].map(e=>({label:e.username,value:e._id}))))};return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.default,{onClickLogin:()=>{n||w.push("/login")},onClickLogout:()=>{(0,l.M7)(),w.push("/login")},onClickCreateUser:()=>{b(!0)},onClickCreateGroup:()=>{g(!0)},auth:n}),(0,r.jsx)(i.default,{onCreateGroup:A,showGroup:x,options:k,onCloseGroup:()=>{g(!1)}}),(0,r.jsx)(c.default,{onCreateUser:S,showUser:f,onCloseUser:()=>{b(!1)}}),(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(p.default,{groups:j,auth:n,onDeleteGroup:Z}),(0,r.jsx)(h.default,{users:y,auth:n,onDeleteUser:G})]})]})}},5642:function(e,n,t){"use strict";t.d(n,{M7:function(){return o},QV:function(){return i},v0:function(){return s}}),t(1163);let r=new(t(3059)).Z,s=()=>r.get("AUTH"),i=e=>r.set("AUTH",e,{path:"/"}),o=e=>r.remove("AUTH",{path:"/"})},8798:function(e,n,t){"use strict";t.d(n,{Fb:function(){return o},VL:function(){return l},sS:function(){return i},yq:function(){return a}});var r=t(1030),s=t(7065);let i=e=>r.ZI(s.aJ,e),o=()=>r.Ql(s.lH),a=(e,n)=>r.pX((0,s.VC)(e,n)),l=e=>r.Ql((0,s.Qf)(e))},1030:function(e,n,t){"use strict";t.d(n,{Ql:function(){return a},ZI:function(){return o},am:function(){return d},eg:function(){return i},pX:function(){return u},sq:function(){return l}});var r=t(5121),s=t(5642);let i=(e,n)=>new Promise((t,s)=>{r.Z.post(e,n).then(e=>{e&&e.data&&t({status:!0,data:e.data})}).catch(e=>{t({status:!1,message:e.message})})}),o=(e,n)=>new Promise((t,i)=>{let o={"content-type":"application/json","x-access-token":(0,s.v0)().token};r.Z.post(e,n,{headers:o}).then(e=>{e&&e.data&&t({status:!0,data:e.data})}).catch(e=>{t({status:!1,message:e.message})})}),a=e=>new Promise((n,t)=>{r.Z.get(e).then(e=>{e&&e.data&&n({status:!0,data:e.data})}).catch(e=>{n({status:!1,error:e.message})})}),l=e=>{let n=(0,s.v0)(),t={"content-type":"application/json","x-access-token":null==n?void 0:n.token};return new Promise((n,s)=>{r.Z.get(e,{headers:t}).then(e=>{e&&e.data&&n({status:!0,data:e.data})}).catch(e=>{n({status:!1,error:e.message})})})},u=(e,n)=>{let t={"content-type":"application/json","x-access-token":(0,s.v0)().token};return new Promise((n,s)=>{r.Z.delete(e,{headers:t}).then(e=>{e&&e.data&&n({status:!0,data:e.data})}).catch(e=>{n({status:!1,message:e.message})})})},d=(e,n)=>new Promise((n,t)=>{r.Z.delete(e).then(e=>{e&&e.data&&n({status:!0,data:e.data})}).catch(e=>{n({status:!1,message:e.message})})})},7065:function(e,n,t){"use strict";t.d(n,{Ag:function(){return l},Fh:function(){return a},Gz:function(){return u},Qf:function(){return p},VC:function(){return c},W8:function(){return i},Zh:function(){return o},aJ:function(){return d},lH:function(){return h},zc:function(){return m}});let r=t(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000",s=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(r).concat(e);return n&&Object.keys(n).forEach(e=>t=t.replace(":".concat(e),n[e])),t},i=s("/login"),o=s("/users"),a=e=>s("/users/:id",{id:e}),l=()=>s("/users"),u=e=>s("/users/:id",{id:e}),d=s("/groups"),c=(e,n)=>s("/groups/:id/users/:userId",{id:e,userId:n}),p=e=>s("/groups/:id",{id:e}),h=s("/groups"),m=e=>s("/groups/:id/messages",{id:e})},4142:function(e,n,t){"use strict";t.d(n,{AW:function(){return a},GA:function(){return u},h8:function(){return l},pH:function(){return i},r4:function(){return o}});var r=t(1030),s=t(7065);let i=e=>r.eg(s.W8,e),o=e=>r.ZI(s.Zh,e),a=()=>r.sq((0,s.Ag)()),l=e=>r.am((0,s.Fh)(e)),u=e=>r.Ql((0,s.Gz)(e))}},function(e){e.O(0,[812,536,310,33,253,139,774,888,179],function(){return e(e.s=1015)}),_N_E=e.O()}]);