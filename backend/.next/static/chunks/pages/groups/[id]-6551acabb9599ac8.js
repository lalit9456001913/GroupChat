(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{8444:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/groups/[id]",function(){return n(3327)}])},9575:function(e,t,n){"use strict";n.r(t);var s=n(5893);n(7294);let r={chatbox:{border:"1px solid #ccc",padding:"10px",borderRadius:"5px",maxWidth:"400px",marginLeft:"5px"},messageList:{listStyle:"none",padding:"0",margin:"0"},userMessage:{backgroundColor:"#4caf50",color:"white",borderRadius:"5px",padding:"8px",marginBottom:"8px",maxWidth:"70%",alignSelf:"flex-end"},otherMessage:{backgroundColor:"#f1f1f1",color:"#333",borderRadius:"5px",padding:"8px",marginBottom:"8px",maxWidth:"70%",alignSelf:"flex-start"}};t.default=e=>{let{messages:t}=e;return(0,s.jsxs)("div",{style:r.chatbox,children:[(0,s.jsx)("h2",{children:"Chatbox"}),(0,s.jsx)("ul",{style:r.messageList,children:(null==t?void 0:t.length)&&(null==t?void 0:t.map((e,t)=>(0,s.jsx)("li",{style:"user"===e.sender?r.userMessage:r.otherMessage,children:e.content},t)))})]})}},1525:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(7294),o=n(9575);t.default=e=>{let{onSendMessage:t,messages:n}=e,[a,i]=(0,r.useState)("");return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(o.default,{messages:n}),(0,s.jsx)("div",{style:{marginTop:"5px"},children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({content:a}),i("")},children:[(0,s.jsxs)("label",{children:["Message:",(0,s.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",children:"Send Message"})]})})]})})}},3327:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(5893),r=n(7294),o=n(1163),a=n(8798),i=n(1525);let c=(0,n(3920).io)("http://localhost:5000",{autoConnect:!1,transports:["websocket"]}),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.emit(e,t)};var l=n(5642),d=n(1030),h=n(7065);let g=e=>d.Ql((0,h.zc)(e));var f=()=>{let[e,t]=(0,r.useState)([]),n=(0,o.useRouter)(),{id:d}=n.query,[h,f]=(0,r.useState)(null),p=(0,l.v0)(),m=async()=>{try{let e=await (0,a.VL)(d);e.status?f(e.data):console.error("Failed to fetch group details")}catch(e){console.error("Error fetching group details:",e)}},x=async()=>{try{let e=await g(d);e.status?t(e.data):console.error("Failed to fetch group details")}catch(e){console.error("Error fetching group details:",e)}};if((0,r.useEffect)(()=>(c.connected||c.connect(),c.on("message",e=>{let{message:n}=e;t(e=>[...e,n])}),c.on("connect",()=>{console.log("Socket Connected:",c.connected),console.log("Connected to Socket.io")}),c.on("error",e=>{console.error("Socket.io Error:",e)}),c.on("disconnect",()=>{console.log("Disconnected from Socket.io")}),()=>{console.log("Socket Disconnected"),c.off("message")}),[]),(0,r.useEffect)(()=>{d&&(u("joinGroup",d),m(),x())},[d]),!h)return(0,s.jsx)("p",{children:"Loading group details..."});let{name:j,admin:v,members:b}=h;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{onClick:()=>{n.push("/dashboard")},children:"Home"}),(0,s.jsxs)("h2",{children:[j," Group Details"]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{children:["Admin:",null==v?void 0:v.username]}),(0,s.jsxs)("p",{children:["Email: ",null==v?void 0:v.email]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Group Members:"}),b.length>0?(0,s.jsx)("ul",{children:b.map(e=>(0,s.jsxs)("li",{children:[e.name," - ",e.email]},e._id))}):(0,s.jsx)("p",{children:"No group members yet."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Number of Group Members:"}),(0,s.jsx)("p",{children:b.length})]}),h.members.some(e=>e._id==p.id)&&(0,s.jsx)(i.default,{onSendMessage:e=>{u("sendMessage",{groupId:d,message:e,userId:null==p?void 0:p.id})},messages:e})]})}},5642:function(e,t,n){"use strict";n.d(t,{M7:function(){return a},QV:function(){return o},v0:function(){return r}}),n(1163);let s=new(n(3059)).Z,r=()=>s.get("AUTH"),o=e=>s.set("AUTH",e,{path:"/"}),a=e=>s.remove("AUTH",{path:"/"})},8798:function(e,t,n){"use strict";n.d(t,{Fb:function(){return a},VL:function(){return c},sS:function(){return o},yq:function(){return i}});var s=n(1030),r=n(7065);let o=e=>s.ZI(r.aJ,e),a=()=>s.Ql(r.lH),i=(e,t)=>s.pX((0,r.VC)(e,t)),c=e=>s.Ql((0,r.Qf)(e))},1030:function(e,t,n){"use strict";n.d(t,{Ql:function(){return i},ZI:function(){return a},am:function(){return l},eg:function(){return o},pX:function(){return u},sq:function(){return c}});var s=n(5121),r=n(5642);let o=(e,t)=>new Promise((n,r)=>{s.Z.post(e,t).then(e=>{e&&e.data&&n({status:!0,data:e.data})}).catch(e=>{n({status:!1,message:e.message})})}),a=(e,t)=>new Promise((n,o)=>{let a={"content-type":"application/json","x-access-token":(0,r.v0)().token};s.Z.post(e,t,{headers:a}).then(e=>{e&&e.data&&n({status:!0,data:e.data})}).catch(e=>{n({status:!1,message:e.message})})}),i=e=>new Promise((t,n)=>{s.Z.get(e).then(e=>{e&&e.data&&t({status:!0,data:e.data})}).catch(e=>{t({status:!1,error:e.message})})}),c=e=>{let t=(0,r.v0)(),n={"content-type":"application/json","x-access-token":null==t?void 0:t.token};return new Promise((t,r)=>{s.Z.get(e,{headers:n}).then(e=>{e&&e.data&&t({status:!0,data:e.data})}).catch(e=>{t({status:!1,error:e.message})})})},u=(e,t)=>{let n={"content-type":"application/json","x-access-token":(0,r.v0)().token};return new Promise((t,r)=>{s.Z.delete(e,{headers:n}).then(e=>{e&&e.data&&t({status:!0,data:e.data})}).catch(e=>{t({status:!1,message:e.message})})})},l=(e,t)=>new Promise((t,n)=>{s.Z.delete(e).then(e=>{e&&e.data&&t({status:!0,data:e.data})}).catch(e=>{t({status:!1,message:e.message})})})},7065:function(e,t,n){"use strict";n.d(t,{Ag:function(){return c},Fh:function(){return i},Gz:function(){return u},Qf:function(){return h},VC:function(){return d},W8:function(){return o},Zh:function(){return a},aJ:function(){return l},lH:function(){return g},zc:function(){return f}});let s=n(3454).env.NEXT_PUBLIC_API_URL||"http://localhost:5000",r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(s).concat(e);return t&&Object.keys(t).forEach(e=>n=n.replace(":".concat(e),t[e])),n},o=r("/login"),a=r("/users"),i=e=>r("/users/:id",{id:e}),c=()=>r("/users"),u=e=>r("/users/:id",{id:e}),l=r("/groups"),d=(e,t)=>r("/groups/:id/users/:userId",{id:e,userId:t}),h=e=>r("/groups/:id",{id:e}),g=r("/groups"),f=e=>r("/groups/:id/messages",{id:e})}},function(e){e.O(0,[812,920,774,888,179],function(){return e(e.s=8444)}),_N_E=e.O()}]);